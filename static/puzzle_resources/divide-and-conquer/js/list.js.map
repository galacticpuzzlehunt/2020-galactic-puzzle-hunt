{"version":3,"sources":["../../src-ui/js/ui/Boot.js","../../src-ui/js/common/intro.js","../../src-ui/js/ui/UI.js"],"names":["getEL","id","_doc","getElementById","customAttr","el","name","value","dataset","lowername","i","length","ch","charAt","toLowerCase","getAttribute","self","doclang","JSON","parse","localStorage","language","pzpr","lang","location","search","substr","hostname","phtml","v3index","extend","onload_func","Array","prototype","slice","call","querySelectorAll","forEach","match","typename","RegExp","$1","addEventListener","e","click_tab","style","display","disp_tab","setTranslation","translate","className","querySelector","set_puzzle_filter","dbif","isdisp","tablename","filtername","pid","variety","toPID","tab","count","parentNode","setlang","setting","stringify","pinfo","valid","editor","document","createElement","href","appendChild","rules","textContent","captions","push","anode","str_jp","ja","str_en","en","this","obj","text","innerHTML","replace","body","window","pstate","lunch","testa","trial","lunch2","lunch3","nigun","omopa","orig","genre","add","tabstate","genres","state"],"mappings":"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,MAAAT,EACAU,OAAaZ,EAAIa,GACjBC,OAAAd,EAAAe,SAIAhC,UAAA,WAEA,IAAA,GAAAvC,GAAA,EAAkBA,EAAIwE,KAAEP,SAAAhE,OAAAD,IAAA,CACxB,GAAAyE,GAAAD,KAAAP,SAAAjE,EACA,IAAAyE,EAAAN,MAAA,CACG,GAAGO,GAAiB,OAAjBpE,EAAYC,QAAKkE,EAAAL,OAA4BK,EAAAH,MAChDG,GAAGN,MAAAQ,UAAiBD,EAAAE,QAAA,YAA4B,sBAGlDtD,MAAGC,UAASC,MACTC,KAAAjC,EAASqF,KAAAnD,iBAAW,gBACpBC,QAAQ,SAAChC,GACTA,EAAAwC,MAAKC,QAAiB,OAAJ9B,EAAIC,QAAA,GAAA,SAE1Be,MAAAC,UAAYC,MACRC,KAAAjC,EAASqF,KAAAnD,iBAAoB,gBAC7BC,QAAQ,SAAChC,GACVA,EAAAwC,MAAAC,QAAA,OAAA9B,EAAAC,QAAA,GAAA,YAMJuE,OAAM9C,iBAAY,OAAA1B,EAAAe,aAAA,GAGlByD,OAAQ3D,QAAGA,KAMX,WACA,GAAGA,GAAW2D,OAAA3D,QAEZ4D,GACDC,OACA,WACA,YACE,WACF,WACA,WACC,SACC,UACA,QACA,UACF,SACA,SACE,YACA,WACF,UACA,YACC,SACC,SACD,YACA,WACA,SACA,QACD,cAEDC,OAAG,SAAc,WAAY,SAAW,WACtCC,OAAQ,WAAY,YACtBC,QAAU,MAAQ,OAAQ,WAAU,UACpCC,QAAW,WAAC,WACVC,OACA,QACA,YACD,WACC,UACA,YACC,WACA,OACA,UACD,UACA,UACC,UACA,QACA,WACD,UACA,YACC,YACA,aACA,SACD,UACA,WACC,YACA,OACA,SACD,UAEFC,OACG,UACA,OACF,UACC,YACA,UACC,YACA,WACH,WACG,SACA,WACF,WACC,WACC,YACF,QACC,SACC,UACD,SACC,SACA,WACA,YACA,YACA,QACA,SACH,UACA,aACC,WACE,WACA,YACA,SACA,UACH,SACA,QACC,UACE,YACA,aACA,SACH,OACA,WACC,QACE,QACA,SACA,aACA,SACH,WACA,SACC,UACE,UACH,OACA,WACC,UACE,WACH,SAEEC,MAAE,aAAA,UAAA,OACFC,OACC,OACA,UACD,UACC,cACF,SACA,aACE,YACF,aAECC,KACC,YACA,aACD,aACC,UACF,YACA,QACE,aACF,kBACA,UACC,YACC,UACF,YACA,WACE,UACF,SACA,OACC,OACA,UACC,UACA,aACH,cACG,QACA,SACA,QACA,WACA,WACH,QACA,SACG,QACA,UACF,YACA,OACE,aAGEC,GACLV,MAAS,QACTG,OAAU,QACRC,OAAI,QACNH,MAAQ,QACPI,MAAA,QACDH,MAAO,QACPI,MAAS,QACTC,KAAO,QACPC,MAAS,QACTC,IAAK,OAGAE,IACL,KAAM,GAACC,KAAOb,GACdA,EAASa,GAAAjE,QAAe,SAAQoB,GAC7B4C,EAAE/E,KAAAoC,QAAAC,MAAAF,KAAA6C,MAAAA,EAAA1C,IAAAwC,EAAAE,KAILzE,GAAIC,QAAA4B,QAAA2C","file":"list.js","sourcesContent":["// Boot.js v3.4.0\r\n\r\n(function() {\r\n\t/********************************/\r\n\t/* 初期化時のみ使用するルーチン */\r\n\t/********************************/\r\n\r\n\tvar onload_pzv = null;\r\n\tvar onload_pzl = null;\r\n\tvar onload_option = {};\r\n\r\n\t//---------------------------------------------------------------------------\r\n\t// ★boot() window.onload直後の処理\r\n\t//---------------------------------------------------------------------------\r\n\tpzpr.on(\"load\", function boot() {\r\n\t\tif (importData()) {\r\n\t\t\tstartPuzzle();\r\n\t\t} else {\r\n\t\t\tsetTimeout(boot, 0);\r\n\t\t}\r\n\t});\r\n\r\n\tfunction importData() {\r\n\t\tif (!onload_pzl) {\r\n\t\t\t/* 1) 盤面複製・index.htmlからのファイル入力/Database入力か */\r\n\t\t\t/* 2) URL(?以降)をチェック */\r\n\t\t\tonload_pzl = importURL();\r\n\r\n\t\t\t/* 指定されたパズルがない場合はさようなら～ */\r\n\t\t\tif (!onload_pzl || !onload_pzl.pid) {\r\n\t\t\t\tfailOpen();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tfunction failOpen() {\r\n\t\tif (!!ui.puzzle && !!ui.puzzle.pid) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar title2 = document.getElementById(\"title2\");\r\n\t\tif (!!title2) {\r\n\t\t\ttitle2.innerHTML = \"Fail to import puzzle data or URL.\";\r\n\t\t}\r\n\t\tdocument.getElementById(\"menupanel\").innerHTML = \"\";\r\n\t}\r\n\r\n\tfunction startPuzzle() {\r\n\t\tvar pzl = onload_pzl;\r\n\t\tui.pzv = onload_pzv; // for the puzz.link callback\r\n\r\n\t\t/* IE SVGのtextLengthがうまく指定できていないので回避策を追加 */\r\n\t\tif (\r\n\t\t\t(function(ua) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tua.match(/MSIE/) || (ua.match(/AppleWebKit/) && ua.match(/Edge/))\r\n\t\t\t\t);\r\n\t\t\t})(navigator.userAgent)\r\n\t\t) {\r\n\t\t\tonload_option.graphic = \"canvas\";\r\n\t\t}\r\n\r\n\t\t/* パズルオブジェクトの作成 */\r\n\t\tvar element = document.getElementById(\"divques\");\r\n\t\tvar puzzle = (ui.puzzle = new pzpr.Puzzle(element, onload_option));\r\n\t\tpzpr.connectKeyEvents(puzzle);\r\n\r\n\t\t/* パズルオブジェクト作成〜open()間に呼ぶ */\r\n\t\tui.event.onload_func(onload_option);\r\n\r\n\t\t// 単体初期化処理のルーチンへ\r\n\t\tpuzzle.once(\"fail-open\", failOpen);\r\n\t\tpuzzle.open(pzl);\r\n\t\tif (onload_option.variant !== void 0) {\r\n\t\t\tpuzzle.config.set(\"variant\", true);\r\n\t\t}\r\n\r\n\t\tpuzzle.on(\"request-aux-editor\", ui.auxeditor.open);\r\n\r\n\t\tif (!!onload_option.net) {\r\n\t\t\tui.network.configure(onload_option.net, onload_option.key);\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\t//---------------------------------------------------------------------------\r\n\t// ★importURL() 初期化時にURLを解析し、パズルの種類・エディタ/player判定を行う\r\n\t//---------------------------------------------------------------------------\r\n\tfunction importURL() {\r\n\t\t/* index.htmlからURLが入力されていない場合は現在のURLの?以降をとってくる */\r\n\t\tvar search = location.search;\r\n\t\tif (!search) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\t/* 一旦先頭の?記号を取り除く */\r\n\t\tif (search.charAt(0) === \"?\") {\r\n\t\t\tsearch = search.substr(1);\r\n\t\t}\r\n\r\n\t\twhile (search.match(/^(\\w+)\\=(\\w+)\\&(.*)/)) {\r\n\t\t\tonload_option[RegExp.$1] = RegExp.$2;\r\n\t\t\tsearch = RegExp.$3;\r\n\t\t}\r\n\r\n\t\tonload_pzv = search;\r\n\t\tvar pzl = pzpr.parser.parseURL(search);\r\n\t\tvar startmode = pzl.mode || (!pzl.body ? \"editor\" : \"player\");\r\n\t\tonload_option.type = onload_option.type || startmode;\r\n\r\n\t\treturn pzl;\r\n\t}\r\n})();\r\n","// intro.js\r\n\r\n(function(){\r\n","// UI.js v3.4.0\r\n/* eslint-env browser */\r\n/* exported ui, _doc, getEL, createEL */\r\n\r\n/* ui.js Locals */\r\nvar _doc = document;\r\nfunction getEL(id) {\r\n\treturn _doc.getElementById(id);\r\n}\r\nfunction createEL(tagName) {\r\n\treturn _doc.createElement(tagName);\r\n}\r\n\r\n//---------------------------------------------------------------------------\r\n// ★uiオブジェクト UserInterface側のオブジェクト\r\n//---------------------------------------------------------------------------\r\n/* extern */\r\nwindow.ui = {\r\n\tversion: \"\",\r\n\r\n\t/* このサイトで使用するパズルのオブジェクト */\r\n\tpuzzle: null,\r\n\r\n\t/* どの種類のパズルのメニューを表示しているか */\r\n\tcurrentpid: \"\",\r\n\r\n\t/* メンバオブジェクト */\r\n\tevent: null,\r\n\tmenuconfig: null,\r\n\turlconfig: null,\r\n\tmenuarea: null,\r\n\ttoolarea: null,\r\n\tpopupmgr: null,\r\n\tkeypopup: null,\r\n\ttimer: null,\r\n\tnetwork: null,\r\n\r\n\tenableGetText: false, // FileReader APIの旧仕様でファイルが読めるか\r\n\tenableReadText: false, // HTML5 FileReader APIでファイルが読めるか\r\n\treader: null, // FileReaderオブジェクト\r\n\r\n\tenableSaveImage: false, // 画像保存が可能か\r\n\tenableImageType: {}, // 保存可能な画像形式\r\n\r\n\tenableSaveBlob: false, // saveBlobが使用できるか\r\n\r\n\tcallbackComplete: null,\r\n\r\n\t//---------------------------------------------------------------------------\r\n\t// ui.displayAll()     全てのメニュー、ボタン、ラベルに対して文字列を設定する\r\n\t// ui.setdisplay()     個別のメニュー、ボタン、ラベルに対して文字列を設定する\r\n\t//---------------------------------------------------------------------------\r\n\tdisplayAll: function() {\r\n\t\tui.menuarea.display();\r\n\t\tui.toolarea.display();\r\n\t\tui.popupmgr.translate();\r\n\t\tui.misc.displayDesign();\r\n\t},\r\n\tsetdisplay: function(idname) {\r\n\t\tui.menuarea.setdisplay(idname);\r\n\t\tui.toolarea.setdisplay(idname);\r\n\t},\r\n\r\n\t//---------------------------------------------------------------------------\r\n\t// ui.customAttr()   エレメントのカスタムattributeの値を返す\r\n\t//---------------------------------------------------------------------------\r\n\tcustomAttr: function(el, name) {\r\n\t\tvar value = \"\";\r\n\t\tif (el.dataset !== void 0) {\r\n\t\t\tvalue = el.dataset[name];\r\n\t\t} else {\r\n\t\t\t/* IE10, Firefox5, Chrome7, Safari5.1以下のフォールバック */\r\n\t\t\tvar lowername = \"data-\";\r\n\t\t\tfor (var i = 0; i < name.length; i++) {\r\n\t\t\t\tvar ch = name[i] || name.charAt(i);\r\n\t\t\t\tlowername += ch >= \"A\" && ch <= \"Z\" ? \"-\" + ch.toLowerCase() : ch;\r\n\t\t\t}\r\n\t\t\tvalue = el[lowername] || el.getAttribute(lowername) || \"\";\r\n\t\t}\r\n\t\treturn value;\r\n\t},\r\n\r\n\t//----------------------------------------------------------------------\r\n\t// ui.windowWidth()   ウィンドウの幅を返す\r\n\t//----------------------------------------------------------------------\r\n\twindowWidth: function() {\r\n\t\treturn window.innerHeight !== void 0\r\n\t\t\t? window.innerWidth\r\n\t\t\t: _doc.body.clientWidth;\r\n\t},\r\n\r\n\t//---------------------------------------------------------------------------\r\n\t// ui.adjustcellsize()  resizeイベント時に、pc.cw, pc.chのサイズを(自動)調節する\r\n\t// ui.getBoardPadding() Canvasと境界線の周りの間にあるpaddingのサイズを求めます\r\n\t//---------------------------------------------------------------------------\r\n\tadjustcellsize: function() {\r\n\t\tvar puzzle = ui.puzzle,\r\n\t\t\tpc = puzzle.painter;\r\n\t\tvar cols = pc.getCanvasCols() + ui.getBoardPadding() * 2;\r\n\t\tvar wwidth = ui.windowWidth() - (ui.urlconfig.embed ? 0 : 6);\r\n\t\tvar mwidth; //  margin/borderがあるので、適当に引いておく\r\n\t\tvar uiconf = ui.menuconfig;\r\n\r\n\t\tvar cellsize,\r\n\t\t\tcellsizeval = uiconf.get(\"cellsizeval\");\r\n\t\tvar cr = { base: 1.0, limit: 0.4 },\r\n\t\t\tws = { base: 0.8, limit: 0.96 },\r\n\t\t\tci = [];\r\n\t\tci[0] = (wwidth * ws.base) / (cellsizeval * cr.base);\r\n\t\tci[1] = (wwidth * ws.limit) / (cellsizeval * cr.base);\r\n\t\tci[2] = (wwidth * ws.limit) / (cellsizeval * cr.limit);\r\n\r\n\t\t// 横幅いっぱいに広げたい場合\r\n\t\tif (uiconf.get(\"fullwidth\")) {\r\n\t\t\tmwidth = wwidth * 0.98;\r\n\t\t\tcellsize = (mwidth * 0.92) / cols;\r\n\t\t}\r\n\t\t// 縮小が必要ない場合\r\n\t\telse if (!uiconf.get(\"adjsize\") || cols < ci[0]) {\r\n\t\t\tmwidth = wwidth * ws.base - 4;\r\n\t\t\tcellsize = cellsizeval * cr.base;\r\n\t\t}\r\n\t\t// ひとまずセルのサイズを変えずにmainの幅を調節する場合\r\n\t\telse if (cols < ci[1]) {\r\n\t\t\tcellsize = cellsizeval * cr.base;\r\n\t\t\tmwidth = cellsize * cols;\r\n\t\t}\r\n\t\t// base～limit間でサイズを自動調節する場合\r\n\t\telse if (cols < ci[2]) {\r\n\t\t\tmwidth = wwidth * ws.limit - 4;\r\n\t\t\tcellsize = mwidth / cols; // 外枠ぎりぎりにする\r\n\t\t}\r\n\t\t// 自動調整の下限値を超える場合\r\n\t\telse {\r\n\t\t\tcellsize = cellsizeval * cr.limit;\r\n\t\t\tmwidth = cellsize * cols;\r\n\t\t}\r\n\r\n\t\t// mainのサイズ変更\r\n\t\tif (!pc.outputImage) {\r\n\t\t\tgetEL(\"main\").style.width = \"\" + (mwidth | 0) + \"px\";\r\n\t\t\tif (ui.urlconfig.embed) {\r\n\t\t\t\tgetEL(\"main\").style.border = \"none\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpuzzle.setCanvasSizeByCellSize(cellsize);\r\n\t},\r\n\tgetBoardPadding: function() {\r\n\t\tvar puzzle = ui.puzzle,\r\n\t\t\tpadding = 0;\r\n\t\tswitch (puzzle.pid) {\r\n\t\t\tcase \"firefly\":\r\n\t\t\tcase \"hashikake\":\r\n\t\t\tcase \"wblink\":\r\n\t\t\tcase \"ichimaga\":\r\n\t\t\tcase \"ichimagam\":\r\n\t\t\tcase \"ichimagax\":\r\n\t\t\t\tpadding = 0.3;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"kouchoku\":\r\n\t\t\tcase \"gokigen\":\r\n\t\t\tcase \"wagiri\":\r\n\t\t\tcase \"creek\":\r\n\t\t\t\tpadding = 0.2;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"slither\":\r\n\t\t\tcase \"cave\":\r\n\t\t\tcase \"mejilink\":\r\n\t\t\t\tpadding = 0.15;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"kinkonkan\":\r\n\t\t\tcase \"skyscrapers\":\r\n\t\t\tcase \"easyasabc\":\r\n\t\t\tcase \"box\":\r\n\t\t\t\tpadding = 0.05;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"bosanowa\":\r\n\t\t\t\tpadding = ui.menuconfig.get(\"disptype_bosanowa\") !== 2 ? 0.5 : 0.05;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tpadding = 0.5;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tif (ui.menuconfig.get(\"fullwidth\")) {\r\n\t\t\tpadding = 0;\r\n\t\t}\r\n\t\treturn padding;\r\n\t},\r\n\r\n\t//--------------------------------------------------------------------------------\r\n\t// ui.selectStr()  現在の言語に応じた文字列を返す\r\n\t//--------------------------------------------------------------------------------\r\n\tselectStr: function(strJP, strEN) {\r\n\t\tif (!strEN) {\r\n\t\t\treturn strJP;\r\n\t\t}\r\n\t\treturn pzpr.lang === \"ja\" ? strJP : strEN;\r\n\t},\r\n\r\n\t//---------------------------------------------------------------------------\r\n\t// ui.getCurrentConfigList() 現在のパズルで有効な設定と設定値を返す\r\n\t//---------------------------------------------------------------------------\r\n\tgetCurrentConfigList: function() {\r\n\t\treturn ui.menuconfig.getList();\r\n\t},\r\n\r\n\t//----------------------------------------------------------------------\r\n\t// ui.initFileReadMethod() ファイルアクセス関連の処理の初期化を行う\r\n\t//----------------------------------------------------------------------\r\n\tinitFileReadMethod: function() {\r\n\t\t// File Reader (あれば)の初期化処理\r\n\t\tif (typeof FileReader !== \"undefined\") {\r\n\t\t\tthis.reader = new FileReader();\r\n\t\t\tthis.reader.onload = function(e) {\r\n\t\t\t\tui.puzzle.open(e.target.result);\r\n\t\t\t};\r\n\t\t\tthis.enableReadText = true;\r\n\t\t} else {\r\n\t\t\tthis.reader = null;\r\n\t\t\tthis.enableGetText =\r\n\t\t\t\ttypeof FileList !== \"undefined\" &&\r\n\t\t\t\ttypeof File.prototype.getAsText !== \"undefined\";\r\n\t\t}\r\n\t},\r\n\r\n\t//----------------------------------------------------------------------\r\n\t// ui.initImageSaveMethod() 画像保存関連の処理の初期化を行う\r\n\t//----------------------------------------------------------------------\r\n\tinitImageSaveMethod: function(puzzle) {\r\n\t\tif (\r\n\t\t\t!!pzpr.Candle.enable.canvas &&\r\n\t\t\t!!_doc.createElement(\"canvas\").toDataURL\r\n\t\t) {\r\n\t\t\tthis.enableImageType.png = true;\r\n\r\n\t\t\tvar canvas = _doc.createElement(\"canvas\");\r\n\t\t\tcanvas.width = canvas.height = 1;\r\n\t\t\tif (canvas.toDataURL(\"image/gif\").match(\"image/gif\")) {\r\n\t\t\t\tthis.enableImageType.gif = true;\r\n\t\t\t}\r\n\t\t\tif (canvas.toDataURL(\"image/jpeg\").match(\"image/jpeg\")) {\r\n\t\t\t\tthis.enableImageType.jpeg = true;\r\n\t\t\t}\r\n\t\t\tif (canvas.toDataURL(\"image/webp\").match(\"image/webp\")) {\r\n\t\t\t\tthis.enableImageType.webp = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!!pzpr.Candle.enable.svg && !!window.btoa) {\r\n\t\t\tthis.enableImageType.svg = true;\r\n\t\t}\r\n\t\tif (!!this.enableImageType.png || !!this.enableImageType.svg) {\r\n\t\t\tthis.enableSaveImage = true;\r\n\t\t}\r\n\r\n\t\tthis.enableSaveBlob = !!window.navigator.saveBlob;\r\n\t}\r\n};\r\n"]}