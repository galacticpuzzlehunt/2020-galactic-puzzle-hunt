/*! @license pzpr.js v (c) 2009-2021 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */

!function(a,b){"object"==typeof module&&module.exports?module.exports=[a,b]:pzpr.classmgr.makeCustom(a,b)}(["balance"],{MouseEvent:{inputModes:{edit:["number","shade","clear"],play:["line","peke","info-line"]},mouseinput_auto:function(){if(this.puzzle.playmode){if(this.mousestart||this.mousemove)"left"===this.btn?this.inputLine():"right"===this.btn&&this.inputpeke();else if(this.mouseend&&this.notInputted()&&this.inputpeke_ifborder())return}else if(this.puzzle.editmode&&this.mousestart){var a=this.getcell();if(a.isnull)return;if(a===this.cursor.getc()||"left"===this.btn)this.inputqnum();else{if(-1===a.qnum)return;a.ques=1-a.ques,a.draw()}}},inputShade:function(){var a=this.getcell();this.mousestart&&(null===this.inputData&&(this.inputData=-1===a.qnum?0:1-a.ques),a.setQues(this.inputData),-1===a.qnum&&a.setQnum(-2),a.draw())}},KeyEvent:{enablemake:!0,keyinput:function(a){if(this.puzzle.editmode){var b=this.cursor.getc();if(b.isnull)return;"q"===a||"a"===a||"z"===a?(-1===b.qnum&&(b.qnum=-2),b.ques=0,b.draw()):"w"===a||"s"===a||"x"===a?(-1===b.qnum&&(b.qnum=-2),b.ques=1,b.draw()):"e"===a||"d"===a||"c"===a?(b.qnum=-1,b.ques=0,b.draw()):this.key_inputqnum(a)}}},Cell:{counted:!1,equalsegments:!1,totallength:0,posthook:{qnum:function(a){-1===a&&(this.ques=0)}},maxnum:function(){var a=this.board;return a.cols+a.rows-2},getSegmentDir:function(a){for(var b=new this.klass.PieceList,c=this.getaddr().movedir(a,1);;){var d=c.getb();if(!d||d.isnull)break;if(!d.isLine())break;b.add(d),c.movedir(a,2)}return b},getAllSegments:function(){for(var a=new this.klass.PieceList,b=1;b<=4;b++)for(var c=this.getSegmentDir(b),d=0;d<c.length;d++)a.add(c[d]);return a},recount:function(){if(!this.counted&&2===this.lcnt){for(var a=[],b=1;b<=4;b++){var c=this.getSegmentDir(b).length;c>0&&a.push(c)}a[0]===a[1]?this.equalsegments=!0:this.equalsegments=!1,this.totallength=a[0]+a[1],this.counted=!0}},invalidate:function(){this.counted=!1}},Border:{posthook:{line:function(){var a=this.sidecell[0],b=new this.klass.CellList;if(this.isvert)for(var c=1;c<=this.board.maxbx;c+=2)b.add(this.board.getc(c,a.by));else for(var c=1;c<=this.board.maxby;c+=2)b.add(this.board.getc(a.bx,c));b.each(function(a){a.invalidate()})}}},Board:{hasborder:1,rebuildInfo:function(){this.cell.each(function(a){a.counted&&a.invalidate()}),this.common.rebuildInfo.call(this)}},LineGraph:{enabled:!0},Graphic:{irowake:!0,numbercolor_func:"qnum",gridcolor_type:"LIGHT",hideHatena:!0,circleratio:[.4,.35],getCircleFillColor:function(a){return-1===a.qnum?null:0===a.ques?"white":1===a.ques?"black":null},getQuesNumberColor:function(a){return 0===a.ques?"black":"white"},textoption:{ratio:.65},minYdeg:.36,maxYdeg:.74,paint:function(){this.drawBGCells(),this.drawDashedGrid(),this.drawCircles(),this.drawQuesNumbers(),this.drawLines(),this.drawPekes(),this.drawChassis(),this.drawTarget()}},Encode:{decodePzpr:function(a){for(var b=0,c=0,d=this.outbstr,e=this.board;c<d.length&&e.cell[b];){var f=e.cell[b],g=d.charAt(c),h=this.readNumber16(d,c);-1!==h[0]?(0===h[0]?(f.ques=0,f.qnum=-2):1===h[0]?(f.ques=1,f.qnum=-2):h[0]%2==0?(f.ques=0,f.qnum=h[0]/2):(f.ques=1,f.qnum=(h[0]-1)/2),c+=h[1],b++):g>="g"&&g<="z"?(b+=parseInt(g,36)-15,c++):c++}this.outbstr=d.substr(c)},encodePzpr:function(a){for(var b=0,c="",d=this.board,e=0;e<d.cell.length;e++){var f,g=d.cell[e].qnum;f=-1===g?this.writeNumber16(-1):-2===g?this.writeNumber16(d.cell[e].ques):this.writeNumber16(2*g+d.cell[e].ques),""===f&&b++,0===b?c+=f:(f||20===b)&&(c+=(15+b).toString(36)+f,b=0)}b>0&&(c+=(15+b).toString(36)),this.outbstr+=c}},FileIO:{decodeData:function(){this.decodeCell(function(a,b){if("."!==b){var c=b.split(",");a.ques=+c[0],a.qnum=+c[1]}}),this.decodeBorderLine()},encodeData:function(){this.encodeCell(function(a){return-1!==a.qnum?a.ques+","+a.qnum+" ":". "}),this.encodeBorderLine()}},AnsCheck:{checklist:["checkBranchLine","checkCrossLine","checkShortSegment","checkLongSegment","checkWhiteUnequal","checkBlackEqual","checkDeadendLine+","checkNoLineCircle","checkOneLoop"],checkShortSegment:function(){this.checkAllCell(function(a){return-1!==a.qnum&&-2!==a.qnum&&2===a.lcnt&&(a.recount(),a.totallength<a.qnum&&(a.getAllSegments().seterr(1),!0))},"segShort")},checkLongSegment:function(){this.checkAllCell(function(a){return-1!==a.qnum&&-2!==a.qnum&&2===a.lcnt&&(a.recount(),a.totallength>a.qnum&&(a.getAllSegments().seterr(1),!0))},"segLong")},checkWhiteUnequal:function(){this.checkAllCell(function(a){return-1!==a.qnum&&0===a.ques&&2===a.lcnt&&(a.recount(),!a.equalsegments&&(a.getAllSegments().seterr(1),!0))},"segWhiteUneq")},checkBlackEqual:function(){this.checkAllCell(function(a){return-1!==a.qnum&&1===a.ques&&2===a.lcnt&&(a.recount(),!!a.equalsegments&&(a.getAllSegments().seterr(1),!0))},"segBlackEq")},checkNoLineCircle:function(){this.checkAllCell(function(a){return a.isNum()&&0===a.lcnt},"circNoLine")}},FailCode:{segShort:["線の長さの和が数字より小さいです。","A segment is too short."],segLong:["線の長さの和が数字より大きいです。","A segment is too long."],segWhiteUneq:["白丸から線の端までの長さが異なっています。","Segments through a white circle are different."],segBlackEq:["黒丸から線の端までの長さが同じになっています。","Segments through a black circle are equal."],circNoLine:["線が通っていない丸があります。","A circle has no line."]}});
//# sourceMappingURL=balance.js.map