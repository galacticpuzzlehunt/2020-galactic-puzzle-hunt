/*! @license pzpr.js v (c) 2009-2021 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */

!function(a,b){"object"==typeof module&&module.exports?module.exports=[a,b]:pzpr.classmgr.makeCustom(a,b)}(["kurodoko","nurimisaki","cave"],{MouseEvent:{use:!0,mouseinput_auto:function(){this.puzzle.playmode?(this.mousestart||this.mousemove)&&this.inputcell():this.puzzle.editmode&&this.mousestart&&this.inputqnum()}},"MouseEvent@kurodoko":{inputModes:{edit:["number","clear","info-blk"],play:["shade","unshade","info-blk"]},RBShadeCell:!0},"MouseEvent@nurimisaki":{inputModes:{edit:["number","clear","info-ublk"],play:["shade","unshade","info-ublk"]}},"MouseEvent@cave":{inputModes:{edit:["number","clear","info-ublk"],play:["shade","unshade","peke","info-ublk"]}},KeyEvent:{enablemake:!0},Cell:{numberRemainsUnshaded:!0,maxnum:function(){return this.board.cols+this.board.rows-1},minnum:2},Board:{cols:9,rows:9},"Board@cave":{hasborder:1},AreaUnshadeGraph:{enabled:!0},"AreaShadeGraph@cave":{enabled:!0},Graphic:{hideHatena:!0,gridcolor_type:"DLIGHT",qanscolor:"black",enablebcolor:!0,numbercolor_func:"qnum",circleratio:[.45,.4],paint:function(){this.drawBGCells(),this.drawGrid(),this.drawShadedCells(),this.drawDotCells(),this.drawCircledNumbers(),this.drawChassis(),this.drawTarget()}},"Graphic@cave":{hideHatena:!1,gridcolor_type:"DLIGHT",enablebcolor:!0,bgcellcolor_func:"qsub1",qanscolor:"black",drawTrialMarks:function(){var a=this.vinc("cell_mark","auto",!0);a.lineWidth=1;for(var b=Math.max(.03*this.cw,2),c=this.range.cells,d=0;d<c.length;d++){var e=c[d];a.vid="c_mark_"+e.id,1===e.qsub&&e.trial?(a.strokeStyle=this.trialcolor,a.strokeCross(e.bx*this.bw,e.by*this.bh,2*b)):a.vhide()}},paint:function(){this.drawBGCells(),this.drawDashedGrid(!1),this.drawShadedCells(),this.drawTrialMarks(),this.drawQuesNumbers(),this.drawPekes(),this.drawTarget()}},Encode:{decodePzpr:function(a){this.decodeNumber16()},encodePzpr:function(a){this.encodeNumber16()},decodeKanpen:function(){this.fio.decodeCellQnum_kanpen()},encodeKanpen:function(){this.fio.encodeCellQnum_kanpen()}},FileIO:{decodeData:function(){this.decodeCellQnum(),this.decodeCellAns()},encodeData:function(){this.encodeCellQnum(),this.encodeCellAns()},kanpenOpen:function(){this.decodeCellQnumAns_kanpen()},kanpenSave:function(){this.encodeCellQnumAns_kanpen()},kanpenOpenXML:function(){this.decodeCellQnum_XMLBoard(),this.decodeCellAns_XMLAnswer()},kanpenSaveXML:function(){this.encodeCellQnum_XMLBoard(),this.encodeCellAns_kurodoko_XMLAnswer()},UNDECIDED_NUM_XML:-4,encodeCellAns_kurodoko_XMLAnswer:function(){this.encodeCellXMLArow(function(a){if(-1===a.qnum){if(1===a.qans)return"w";if(1===a.qsub)return"s"}return"u"})}},AnsCheck:{checklist:["checkShadeCellExist","check2x2ShadeCell@nurimisaki","checkAdjacentShadeCell@kurodoko","checkConnectUnshadeRB@kurodoko","checkConnectUnshade@nurimisaki,cave","checkConnectShadeOutside@cave","checkViewOfNumber","check2x2UnshadeCell@nurimisaki","checkCirclePromontory@nurimisaki","checkNonCircleNotPromontory@nurimisaki","doneShadingDecided"],checkViewOfNumber:function(){for(var a=this.board.cell,b=0;b<a.length;b++){var c=a[b];if(c.isValidNum()){var d,e=new this.klass.CellList,f=c.adjacent;for(e.add(c),d=f.left;d.isUnshade();)e.add(d),d=d.adjacent.left;for(d=f.right;d.isUnshade();)e.add(d),d=d.adjacent.right;for(d=f.top;d.isUnshade();)e.add(d),d=d.adjacent.top;for(d=f.bottom;d.isUnshade();)e.add(d),d=d.adjacent.bottom;if(c.qnum!==e.length){if(this.failcode.add("nmSumViewNe"),this.checkOnly)break;e.seterr(1)}}}}},"AnsCheck@nurimisaki":{check2x2UnshadeCell:function(){this.check2x2Block(function(a){return a.isUnshade()},"cu2x2")},checkCirclePromontory:function(){var a=this;this.checkAllCell(function(b){return b.isNum()&&!a.isPromontory(b)},"circleNotPromontory")},checkNonCircleNotPromontory:function(){var a=this;this.checkAllCell(function(b){return b.noNum()&&b.isUnshade()&&a.isPromontory(b)},"nonCirclePromontory")},isPromontory:function(a){var b=0;return a.adjacent.left.isUnshade()&&b++,a.adjacent.right.isUnshade()&&b++,a.adjacent.top.isUnshade()&&b++,a.adjacent.bottom.isUnshade()&&b++,1===b}},"AnsCheck@cave":{checkConnectShadeOutside:function(){for(var a=this.board,b=0;b<a.sblkmgr.components.length;b++){var c=a.sblkmgr.components[b].clist,d=c.getRectSize();if(d.x1!==a.minbx+1&&d.x2!==a.maxbx-1&&d.y1!==a.minby+1&&d.y2!==a.maxby-1){if(this.failcode.add("csConnOut"),this.checkOnly)break;c.seterr(1)}}}},FailCode:{cu2x2:["2x2の白マスのカタマリがあります。","There is a 2x2 block of unshaded cells."],circleNotPromontory:["丸のマスが岬になっていません。","A circle is not a dead end."],nonCirclePromontory:["丸のないマスが岬になっています。","A dead end has no circle."],csConnOut:["盤面の外につながっていない黒マスがあります。","Some shaded cells are not connected to the outside."]}});
//# sourceMappingURL=kurodoko.js.map