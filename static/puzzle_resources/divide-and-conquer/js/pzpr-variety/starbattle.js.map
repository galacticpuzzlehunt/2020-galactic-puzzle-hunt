{"version":3,"sources":["../../../src/variety/starbattle.js"],"names":["starXOffset","starYOffset","pidlist","classbase","module","exports","pzpr","classmgr","makeCustom","MouseEvent","use","RBShadeCell","inputModes","play","mouseinput_other","this","inputMode","mousestart","inputcell_starbattle","inputdot","mouseinput_auto","puzzle","playmode","btn","mousemove","inputData","editmode","inputEdit","cell","getcell","isnull","mouseCell","decIC","setQans","setQsub","draw","mousereset","inputEdit_first","inputborder","bd","board","bx","inputPoint","by","rect","starCount","bx1","bx2","by1","by2","val","getNewNumber","count","set","pos","getpos","prevPos","equals","dot","getDot","piece","group","setDot","KeyEvent","enablemake","moveTarget","keyinput","ca","keydown","key_inputqnum_starbattle","prev","Dot","qsub","opemgr","disCombine","getTrial","trial","Board","hasborder","hasdots","createExtraObject","klass","StarCount","initExtraObject","col","row","init","isDot","isStar","getc","qans","dotIsRedundant","isvert","initialize","maxbx","addOpe","getmaxnum","Math","max","floor","cols","getminnum","old","num","add","StarCountOperation","painter","paintRange","minbx","StarCountOperation:Operation","type","setData","decode","strs","toString","join","undo","exec","redo","OperationManager","addExtraOperation","operationlist","push","AreaRoomGraph","enabled","Graphic","paint","drawBGCells","drawDashedGrid","drawBorders","drawDots","drawDashes","drawStars","drawChassis","drawStarCount","drawCursor_starbattle","getCanvasRows","getBoardRows","margin","getOffsetRows","setRangeObject","x1","y1","x2","y2","common","call","range","copyBufferData","g","g2","canvas","sx2","child","width","sy2","minby","bh","y0","context","clearRect","drawImage","x0","getDotFillColor","trialcolor","pekecolor","getDotOutlineColor","getDotRadius","vinc","lineWidth","clist","cells","i","length","px","py","vid","id","bw","strokeStyle","mbcolor","strokeLine","vhide","fillStyle","qanscolor","dispStar","quescolor","font","ch","fontfamily","textAlign","textBaseline","fillText","maxby","isdraw","getConfig","outputImage","targetColorEdit","cw","strokeRect","sizeX","sizeY","beginPath","moveTo","p","lineTo","closePath","fill","Encode","decodePzpr","decodeStarCount","decodeBorder","encodePzpr","encodeStarCount","encodeBorder","barray","outbstr","split","FileIO","decodeData","readLine","decodeAreaRoom","decodeCellAns","encodeData","writeLine","encodeAreaRoom","encodeCellAns","AnsCheck","checklist","checkAroundStars","c","target","CellList","relcell","failcode","checkOnly","seterr","checkInsufficientStars","checkAllBlock","roommgr","w","h","a","n","checkOverSaturatedStars","checkStarCountInLine","checkRowsCols","isStarCountInClist","result","filter","FailCode","starAround","bkStarGt","bkStarLt","lnStarNe"],"mappings":"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","file":"starbattle.js"}