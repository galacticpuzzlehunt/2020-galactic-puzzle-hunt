/*! @license pzpr.js v (c) 2009-2021 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */

!function(a,b){"object"==typeof module&&module.exports?module.exports=[a,b]:pzpr.classmgr.makeCustom(a,b)}(["compass"],{MouseEvent:{inputModes:{edit:["clear","number"],play:["border","subline"]},mouseinput_clear:function(){this.input51_fixed()},mouseinput_number:function(){this.mousestart&&this.inputqnum_cell51()},mouseinput_auto:function(){this.puzzle.playmode?(this.mousestart||this.mousemove)&&("left"===this.btn&&this.isBorderMode()?this.inputborder():this.inputQsubLine()):this.puzzle.editmode&&this.mousestart&&this.input51()}},KeyEvent:{enablemake:!0,keyinput:function(a){this.inputnumber51(a)}},Cell:{dirs51:4,disInputHatena:!0,isNum:function(){return 51===this.ques},maxnum:function(){return this.board.cols*this.board.rows},minnum:0},Board:{cols:8,rows:8,hasborder:1},BoardExec:{adjustBoardData2:function(a,b){for(var c=this.board,d=0;d<c.cell.length;d++){var e=c.cell[d];if(51===e.ques){var f=e.qnum,g=e.qnum2,h=e.qnum3,i=e.qnum4;switch(a){case this.FLIPY:e.qnum2=i,e.qnum4=g;break;case this.FLIPX:e.qnum=h,e.qnum3=f;break;case this.TURNR:e.qnum=i,e.qnum2=f,e.qnum3=g,e.qnum4=h;break;case this.TURNL:e.qnum=g,e.qnum2=h,e.qnum3=i,e.qnum4=f}}}}},AreaRoomGraph:{enabled:!0},Graphic:{gridcolor_type:"DLIGHT",ttcolor:"rgb(255,255,127)",bordercolor_func:"qans",paint:function(){this.drawBGCells(),this.drawQues51(),this.drawDashedGrid(),this.drawBorders(),this.drawQuesNumbersOn51(),this.drawBorderQsubs(),this.drawChassis(),this.drawTarget()},drawQues51:function(){this.drawTargetTriangle(),this.drawSlash51Cells()}},Encode:{decodePzpr:function(){this.decodeCompass()},encodePzpr:function(){this.encodeCompass()},decodeCompass:function(){for(var a=0,b=0,c=this.outbstr,d=this.board;b<c.length&&d.cell[a];){var e=d.cell[a],f=c.charAt(b);if(f>="g"&&f<="z")a+=parseInt(f,36)-15,b++;else{e.ques=51;for(var g=1;g<=4;g++){var h=this.readNumber16(c,b);if(-1===h[0]){b++;break}e.setQnumDir(g,-2===h[0]?-1:h[0]),b+=h[1]}a++}}},encodeCompass:function(){for(var a=0,b="",c=this.board,d=0;d<c.cell.length;d++){var e="",f=c.cell[d];if(51===f.ques)for(var g=1;g<=4;g++){var h=f.getQnumDir(g);-1===h&&(h=-2),e+=this.writeNumber16(h)}else a++;0===a?b+=e:(e||20===a)&&(b+=(15+a).toString(36)+e,a=0)}a>0&&(b+=(15+a).toString(36)),this.outbstr+=b}},FileIO:{decodeData:function(){this.decodeCellCompass(),this.decodeBorderAns()},encodeData:function(){this.encodeCellCompass(),this.encodeBorderAns()},decodeCellCompass:function(){var a=this.board;a.disableInfo(),this.decodeCell(function(a,b){if("."!==b){var c=b.split(",");a.set51cell(),a.qnum=+c[0],a.qnum2=+c[1],a.qnum3=+c[2],a.qnum4=+c[3]}}),a.enableInfo()},encodeCellCompass:function(){this.encodeCell(function(a){return 51===a.ques?a.qnum+","+a.qnum2+","+a.qnum3+","+a.qnum4+" ":". "})}},AnsCheck:{checklist:["checkNoNumber","checkDoubleNumber","checkDirectionSize","checkBorderDeadend+"],checkDirectionSize:function(){for(var a=this.board.roommgr.components,b=0;b<a.length;b++){var c=a[b],d=c.clist,e=d.getQnumCell();if(!e.isnull)for(var f=d.getRectSize(),g=1;g<=4;g++){var h=e.getQnumDir(g);if(!(h<0)){var i;switch(g){case e.UP:i=this.board.cellinside(f.x1,f.y1,f.x2,e.by-1);break;case e.DN:i=this.board.cellinside(f.x1,e.by+1,f.x2,f.y2);break;case e.RT:i=this.board.cellinside(e.bx+1,f.y1,f.x2,f.y2);break;case e.LT:i=this.board.cellinside(f.x1,f.y1,e.bx-1,f.y2)}if(i=i.filter(function(a){return a.room===c}),i.length!==h){if(this.failcode.add("ceDirection"),this.checkOnly)return;e.seterr(1),i.seterr(1)}}}}}},FailCode:{ceDirection:["数字の方向にあるブロック内のマス数が、数字と一致していないブロックがあります。","The number of cells in the direction is wrong."],ceNoNum:["記号マスを１つも含まないブロックがあります。","There is an area without a clue."],bkNumGe2:["２つ以上の記号マスを含むブロックがあります。","There is an area with more than one clue."]}});
//# sourceMappingURL=compass.js.map